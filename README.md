# ì¹´í”„ì¹´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì£¼ë¬¸ ì„œë¹„ìŠ¤ë¥¼ êµ¬ì¶•í•´ë³´ì!

## ì‚¬ìš©ê¸°ìˆ 
- Spring Boot
- Kotlin
- Apache Kafka => 3 KRaft Clusters
- Apache Avro
- Schema Registry
- MongoDB
- Redis => Standalone mode
- Docker

## ì´ ì£¼ë¬¸ ì„œë¹„ìŠ¤ê°€ ë­ê°€ íŠ¹ë³„í•œë°? ğŸ¤”
ì£¼ë¬¸ ì„œë¹„ìŠ¤ëŠ” ì£¼ë¬¸-ê²°ì œ-ë°°ì†¡ì´ êµ‰ì¥íˆ ë™ê¸°ì ì¸ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤. ì™œëƒí•˜ë©´ ì£¼ë¬¸ì´ ì•ˆë˜ì—ˆëŠ”ë° ê²°ì œë¥¼ í•  ìˆ˜ ì—†ìœ¼ë©°, ê²°ì œê°€ ì•ˆë˜ì—ˆëŠ”ë° ë°°ì†¡ì¤€ë¹„ë¥¼ í•˜ë©´ ì•ˆë˜ê² ì£ ?
ë”°ë¼ì„œ ì´ëŸ° ë™ê¸°ì ì¸ ë¬¸ì œë¥¼ Transactional Outbox Patternì„ ì‚¬ìš©í•˜ì—¬ í•´ê²°í•©ë‹ˆë‹¤.
ë‹¨ìˆœí•˜ê²Œ Transactional Outbot Patternë§Œ êµ¬í˜„í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼ êµ¬í˜„ì„ í•˜ë©´ì„œ ë§ˆì£¼ì¹œ ë¬¸ì œì ë“¤ê³¼ ìƒê°ë“¤ì„ í•˜ë‚˜ì”© ì •ë¦¬í–ˆìŠµë‹ˆë‹¤.

## Transactional Outbox Pattern
ê¸°ì¡´ì˜ 2PCëŠ” 2 Phaseì¸ prepare, commit phaseì—ì„œ DB Lockì„ ì‚¬ìš©í•˜ê¸° ë•Œë¬¸ì— í•œë²ˆì— ë§ì€ ìš”ì²­ì´ ëª°ë¦¬ë”ë¼ë„ ìˆœì°¨ì²˜ë¦¬ ë•Œë¬¸ì— ì˜¤ë˜ ê±¸ë¦°ë‹¤ëŠ” ë¬¸ì œì ì´ ìˆìŠµë‹ˆë‹¤.
2PCë¥¼ ìœ„í•œ ì½”ë””ë„¤ì´í„°ë¥¼ êµ¬í˜„í•´ì•¼í•˜ë©°, ì´ì¢…ì˜ DBì— ëŒ€í•´ íŠ¹íˆ êµ¬í˜„í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.
Transactional Outbox Patternì€ 2PCë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  íŠ¸ëœì­ì…˜ì— ëŒ€í•œ ì›ìì„±ì„ ë³´ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” Polling Publisher Patternì„ ì‚¬ìš©í•˜ì—¬ Transactional Outbox Patternì„ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- Serviceì—ì„œ documentë¥¼ ì‚½ì…í•˜ë©´ì„œ ë™ì‹œì— outbox dbì— ë°ì´í„°ë¥¼ ë„£ìŠµë‹ˆë‹¤.
- ìŠ¤ì¼€ì¥´ëŸ¬ê°€ íŠ¹ì • ì‹œê°„ë§ˆë‹¤ ëŒë©´ì„œ ì²˜ë¦¬ê°€ ì•ˆëœ outboxë“¤ì„ outbox topicì„ í†µí•´ ì•Œë¦½ë‹ˆë‹¤. => relay
- ê·¸ëŸ¬ë©´ Serviceì˜ Brokerê°€ ë°›ì•„ì„œ ì²˜ë¦¬ë¥¼ í•œ ë‹¤ìŒ ì™„ë£Œ ì²˜ë¦¬ê¹Œì§€ í•©ë‹ˆë‹¤.

ref: https://microservices.io/patterns/data/transactional-outbox.html
